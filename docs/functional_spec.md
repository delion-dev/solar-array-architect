# 기능 명세서 (Functional Specifications)

## 1. 소개 (Introduction)
**Solar Array Architect**는 태양광 에너지 전문가가 PV 시스템을 설계하고 경제적 타당성을 분석할 수 있도록 지원하는 웹 기반 도구입니다.

## 2. 사용자 인터페이스 구조
애플리케이션은 세 가지 주요 섹션으로 구성된 단일 대시보드 레이아웃을 가집니다:
1.  **헤더 (Header)**: 브랜딩, 전역 작업(리포트, 문의), 버전 정보.
2.  **입력 패널 (Left)**: 시스템 구성을 위한 제어 패널.
3.  **대시보드 패널 (Right)**: 결과 시각화 및 분석 패널.

## 3. 상세 기능 (Detailed Features)

### 3.1. 엔지니어링 분석 (기술적 검토)
시스템은 선택된 장비를 기반으로 최적의 전기적 구성을 자동으로 계산합니다.

*   **모듈 및 인버터 선택**:
    *   데이터베이스에서 PV 모듈을 선택하거나 사용자 정의 스펙(Voc, Isc, Vmp, Imp, 계수)을 입력합니다.
    *   인버터를 선택하거나 사용자 정의 스펙(Max V, MPPT V, 정격 kW)을 입력합니다.
*   **어레이 구성 (Array Configuration)**:
    *   **스트링 사이징**: 온도 보정 전압을 기반으로 스트링 당 최대 및 최소 모듈 수를 계산합니다.
    *   **인버터 매칭**: 필요한 인버터 수량과 DC/AC 비율(과부하율)을 계산합니다.
*   **안전성 검토 (Safety Checks)**:
    *   **전압 안전성**: Voc(겨울) < 인버터 최대 입력 전압 여부 확인.
    *   **MPPT 범위**: Vmp(여름/겨울)가 인버터 MPPT 범위 내에 있는지 확인.
    *   **전류 안전성**: 어레이 Isc < 인버터 최대 단락 전류 여부 확인.
    *   **기동 체크**: Voc(여름) > 인버터 기동 전압 여부 확인.
*   **전압 강하 계산**:
    *   길이와 단면적을 기반으로 DC 케이블 전압 강하를 계산합니다.
    *   전압 강하가 3%를 초과하면 경고를 표시합니다.

### 3.2. 경제성 분석 (사업성 검토)
시스템은 20년 금융 시뮬레이션을 수행합니다.

*   **입력 변수**:
    *   **수익**: SMP(계통한계가격), REC(신재생에너지공급인증서) 가격 및 가중치.
    *   **비용**: 공사비(CAPEX), 유지보수비(OPEX), 부지 임대료.
    *   **금융**: 대출금, 이자율, 기간, 거치 기간.
    *   **세무**: 법인세율, 감가상각 기간.
*   **주요 지표**:
    *   **ROI (투자수익률)**: 총 순이익 / 총 투자비.
    *   **NPV (순현재가치)**: 미래 현금 흐름의 현재 가치.
    *   **LCOE (균등화 발전원가)**: 발전된 kWh 당 평균 비용.
    *   **회수 기간 (Payback Period)**: 초기 투자비를 회수하는 데 걸리는 시간.
*   **민감도 분석**:
    *   SMP/REC 가격 변동이 순이익과 ROI에 미치는 영향을 분석합니다.

### 3.3. 발전량 시뮬레이션
*   **TMY 데이터 통합**: TMY(Typical Meteorological Year) 데이터(또는 단순 월별 평균)를 사용하여 발전량을 추정합니다.
*   **손실 계수 (Loss Factors)**: 오염, 음영, 불일치, LID, 배선, 가동률 손실을 고려하여 종합 효율(PR)을 계산합니다.
*   **효율 저하**: 연간 모듈 효율 감소율(예: -0.5%/년)을 적용합니다.

### 3.4. 리포팅 및 문서화
*   **BOM (자재명세서)**: 주요 필요 장비(모듈, 인버터, 케이블 등) 목록을 자동으로 생성합니다.
*   **PDF 리포트**:
    *   다음 내용을 포함하는 전문가용 PDF 보고서를 생성합니다:
        *   프로젝트 요약
        *   시스템 아키텍처 다이어그램 (SLD)
        *   엔지니어링 안전성 검토 결과
        *   재무 분석 요약 (현금 흐름표)
        *   차트 및 그래프
    *   브라우저에서 직접 다운로드하거나 인쇄할 수 있습니다.

## 4. 데이터 모델 (주요 엔티티)

### PV 모듈 (PV Module)
*   `Pmax`, `Voc`, `Isc`, `Vmp`, `Imp`
*   온도 계수 (`Voc`, `Pmax`)

### 인버터 (Inverter)
*   `Max Input Voltage`, `MPPT Range`
*   `Rated Output`, `Max Output`

### 경제성 설정 (Economic Config)
*   `SMP`, `REC`, `가중치`
*   `공사비`, `유지보수비`
*   `대출 조건`, `세율`

## 5. 시스템 요구사항
*   **브라우저**: 최신 웹 브라우저 (Chrome, Edge, Firefox, Safari).
*   **화면**: 데스크탑/태블릿에 최적화됨 (반응형).
*   **네트워크**: 초기 로드 시 필요; 이후 오프라인 사용 가능.
